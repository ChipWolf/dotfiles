# splits.conf — window splitting and navigation keybindings
# Included from kitty.conf. Requires `enabled_layouts splits,stack`.
# https://sw.kovidgoyal.net/kitty/layouts/#the-splits-layout

# --- Create splits ---
# Horizontal split (new pane below): ctrl+a " (tmux default)
map ctrl+a>apostrophe      launch --location=hsplit --cwd=last_reported
# Also: ctrl+a - (oh-my-tmux alias)
map ctrl+a>minus           launch --location=hsplit --cwd=last_reported
# Without cwd inheritance (useful over ssh)
map ctrl+a>shift+minus     launch --location=hsplit

# Vertical split (new pane to the right): ctrl+a % (tmux default)
# kitty key name for % is "percent" (shift+5)
map ctrl+a>percent         launch --location=vsplit --cwd=last_reported
# Also: ctrl+a \ (oh-my-kitty alias)
map ctrl+a>backslash       launch --location=vsplit --cwd=last_reported
# Without cwd inheritance
map ctrl+a>shift+backslash launch --location=vsplit

# Auto-split (hsplit if tall, vsplit if wide)
map f4 launch --location=split

# --- Navigate between panes (vim-style and arrow) ---
map ctrl+a>h neighboring_window left
map ctrl+a>l neighboring_window right
map ctrl+a>k neighboring_window up
map ctrl+a>j neighboring_window down

map ctrl+left  neighboring_window left
map ctrl+right neighboring_window right
map ctrl+up    neighboring_window up
map ctrl+down  neighboring_window down

# --- Move panes ---
map shift+left  move_window left
map shift+right move_window right
map shift+up    move_window up
map shift+down  move_window down

# --- Resize panes ---
# ctrl+a H/J/K/L — match oh-my-tmux resize bindings (vim-style)
map ctrl+a>H resize_window narrower 5
map ctrl+a>J resize_window shorter 5
map ctrl+a>K resize_window taller 5
map ctrl+a>L resize_window wider 5
# Also: alt+arrow fallbacks
map alt+n resize_window narrower
map alt+w resize_window wider
map alt+u resize_window taller
map alt+d resize_window shorter 3
# Reset all panes in the tab to default sizes
map ctrl+home resize_window reset

# --- Rotate split axis ---
map f7 layout_action rotate

# --- Zoom toggle ---
# Smarter than toggle_layout stack: skips if only one window open
map ctrl+a>z kitten zoom_toggle.py

# --- Convenience splits (matching tmux.conf.local) ---
# ctrl+a / → open man page in a vertical split (prompts for page name)
map ctrl+a>slash launch --location=vsplit --cwd=last_reported bash -c 'read -p "man: " p && man "$p"; exec bash'
# ctrl+a e → open file in nvim in a vertical split (prompts for filename)
map ctrl+a>e launch --location=vsplit --cwd=last_reported bash -c 'read -p "nvim: " f && nvim "$f"; exec bash'

# --- Go to tab by number ---
map ctrl+a>1 goto_tab 1
map ctrl+a>2 goto_tab 2
map ctrl+a>3 goto_tab 3
map ctrl+a>4 goto_tab 4
map ctrl+a>5 goto_tab 5
map ctrl+a>6 goto_tab 6
map ctrl+a>7 goto_tab 7
map ctrl+a>8 goto_tab 8
map ctrl+a>9 goto_tab 9
map ctrl+a>0 goto_tab 10
